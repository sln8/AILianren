{
  "bsonType": "object",
  "required": ["user_id", "lover_id"],
  "permission": {
    "read": "doc.user_id == auth.uid",
    "create": true,
    "update": "doc.user_id == auth.uid",
    "delete": false
  },
  "properties": {
    "_id": { "description": "聊天记录ID" },
    "user_id": { "bsonType": "string", "description": "用户ID" },
    "lover_id": { "bsonType": "string", "description": "恋人ID" },
    "progress_id": { "bsonType": "string", "description": "游戏进度ID" },
    "messages": { "bsonType": "array", "description": "消息列表" },
    "date": { "bsonType": "string", "description": "日期" },
    "round_count": { "bsonType": "int", "description": "对话轮数" },
    "total_words_consumed": { "bsonType": "int", "description": "总消耗字数" }
  }
}
