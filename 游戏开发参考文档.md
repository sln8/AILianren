
# 《这些年我们追过的AI恋人》— 完整游戏开发参考文档

---

## 一、游戏概览

| 项目 | 内容 |
|---|---|
| **游戏名称** | 这些年我们追过的AI恋人 |
| **平台** | 抖音小游戏 |
| **开发工具** | 抖音小游戏开发者工具 |
| **后端/数据库** | 抖音云（云函数 + 云数据库） |
| **AI引擎** | 字节跳动豆包大模型（火山方舟API） |
| **变现模式** | 纯广告变现（激励视频广告为主） |
| **游戏类型** | AI互动文字恋爱养成游戏 |
| **核心玩法** | 自由对话驱动剧情发展，追求AI恋人，从陌生人到白头偕老 |

---

## 二、核心玩法设计

### 2.1 游戏流程主线

```
首次进入 → 选择玩家性别 → 展示异性恋人候选列表（图片+姓名+性格标签）
     → 选择一位恋人 → 进入对话界面 → 自由聊天推动剧情
     → 关系阶段递进（陌生人→认识→熟悉→好友→暧昧→恋人→热恋→求婚→结婚→生子→婚后生活→10/20/30年婚姻→...→恋人死亡/重新选择）
     → 结局达成 → 可重新选择恋人开启新篇章
```

### 2.2 关系阶段系统

| 阶段编号 | 关系阶段 | 好感度范围 | 阶段特征 | 解锁内容 |
|---|---|---|---|---|
| 0 | 陌生人 | 0 ~ 99 | 初次见面，客套寒暄 | 基础对话 |
| 1 | 认识 | 100 ~ 249 | 彼此了解背景，有话题 | 恋人分享日常 |
| 2 | 熟悉 | 250 ~ 449 | 经常交流，互相关心 | 恋人主动发消息（系统触发） |
| 3 | 好友 | 450 ~ 649 | 无话不说的好朋友 | 深度话题、秘密分享 |
| 4 | 暧昧 | 650 ~ 799 | 暗生情愫，互有暗示 | 暧昧台词、心跳事件 |
| 5 | 表白/恋人 | 800 ~ 999 | 正式告白成功 | 恋人称呼变化、约会事件 |
| 6 | 热恋 | 1000 ~ 1299 | 热恋期甜蜜互动 | 热恋专属剧情、亲密互动 |
| 7 | 求婚 | 1300 ~ 1499 | 玩家或AI触发求婚 | 求婚事件、戒指选择 |
| 8 | 结婚 | 1500 ~ 1799 | 举办婚礼 | 婚礼剧情、婚后生活开启 |
| 9 | 生子 | 1800 ~ 2099 | 迎来新生命 | 育儿剧情、家庭事件 |
| 10 | 10年婚姻 | 2100 ~ 2599 | 柴米油盐、矛盾与和解 | 婚姻危机/甜蜜事件 |
| 11 | 20年婚姻 | 2600 ~ 3099 | 子女成长、事业与家庭 | 中年危机/温馨回忆 |
| 12 | 30年婚姻 | 3100 ~ 3599 | 携手到老、人生回顾 | 金婚事件、生命感悟 |
| 13 | 晚年/结局 | 3600+ | 恋人死亡/自然终局 | 结局CG、回忆录、重新开始 |

### 2.3 好感度机制

| 规则 | 说明 |
|---|---|
| **初始好感度** | 0 |
| **好感度变化** | 每次AI回复时，由大模型在回复中附带好感度变化值（+/-），服务端校验后写入数据库 |
| **正向行为** | 关心、赞美、倾听、送礼物（文字描述）、幽默、体贴 → +3 ~ +15 |
| **负向行为** | 冷漠、侮辱、敷衍、不尊重、言语攻击 → -5 ~ -30 |
| **阶段降级** | 好感度降到前一阶段范围时，关系阶段回退 |
| **好感度上限** | 无硬上限，但阶段递进有门槛 |
| **每日自然衰减** | 未登录超过3天，每天自然衰减 -5（防止僵尸账号） |

### 2.4 AI恋人角色设定

#### 男性恋人（供女性玩家选择）— 建议6~8位

| 编号 | 姓名 | 性格标签 | 形象风格 | 人设简介 |
|---|---|---|---|---|
| M1 | 陆辰逸 | 温柔学长 | 白衬衫、书卷气 | 大学学长，温柔细腻，喜欢文学 |
| M2 | 顾北川 | 霸道总裁 | 西装革履、冷峻 | 商业精英，外冷内热，占有欲强 |
| M3 | 林屿 | 阳光运动男 | 运动服、灿烂笑容 | 篮球队长，开朗热情，直球型 |
| M4 | 苏墨白 | 文艺音乐人 | 吉他、耳机 | 独立音乐人，感性浪漫，有艺术气质 |
| M5 | 江予安 | 邻家青梅 | 休闲穿搭、温暖 | 从小一起长大的邻居，熟悉又陌生 |
| M6 | 沈夜 | 神秘学者 | 黑色风衣、眼镜 | 大学教授，知识渊博，难以捉摸 |

#### 女性恋人（供男性玩家选择）— 建议6~8位

| 编号 | 姓名 | 性格标签 | 形象风格 | 人设简介 |
|---|---|---|---|---|
| F1 | 苏晚晴 | 温柔学姐 | 长发、裙装、温婉 | 文学系学姐，温柔知性，善解人意 |
| F2 | 沈清歌 | 冷艳御姐 | 高挑、职业装 | 律师事务所合伙人，理性强势但内心柔软 |
| F3 | 林小鹿 | 活泼可爱 | 双马尾、休闲 | 邻家少女，活力满满，爱撒娇 |
| F4 | 叶知秋 | 文艺才女 | 画笔、贝雷帽 | 插画师，安静内敛，感性细腻 |
| F5 | 姜柠 | 运动女孩 | 运动服、马尾 | 舞蹈系校花，阳光自信，大大咧咧 |
| F6 | 白芷 | 神秘学妹 | 黑长直、素雅 | 心理学系学妹，洞察力强，话少但精准 |

> **说明：** 所有恋人形象图片本地预置于小游戏资源包中（建议每位角色准备：立绘全身像×1、头像×1、不同表情/场景图×3~5），不由AI随机生成。

---

## 三、AI大模型调用设计

### 3.1 技术架构

```
┌─────────────────┐         ┌──────────────────┐         ┌─────────────────┐
│  抖音小游戏前端   │ ──────→ │  抖音云·云函数    │ ──────→ │ 豆包大模型API   │
���  (tt.request)   │ ←────── │  (业务逻辑层)     │ ←────── │ (火山方舟)      │
└─────────────────┘         └──────────────────┘         └─────────────────┘
                                    │
                                    ↓
                            ┌──────────────────┐
                            │  抖音云·云数据库   │
                            │  (玩家数据存储)    │
                            └──────────────────┘
```

### 3.2 大模型调用策略

| 项目 | 方案 |
|---|---|
| **模型选择** | 豆包 doubao-lite-32k（日常对话，低成本）/ doubao-pro-32k（关键剧情节点，高质量） |
| **调用位置** | 仅在抖音云·云函数中调用，前端不直接调用（保护API Key） |
| **对话上下文** | 云函数维护每位玩家的最近20~30轮对话历史，传入messages数组 |
| **System Prompt** | 包含角色人设、当前关系阶段、好感度、剧情规则、输出格式要求 |
| **输出格式** | AI回复需返回JSON结构：`{reply: "对话内容", favorDelta: +5, event: null/事件触发}` |
| **流式输出** | 建议开启stream模式，前端逐字展示，提升互动体验 |

### 3.3 System Prompt 核心设计框架

大模型的System Prompt是游戏的灵魂，需精心设计，以下是核心框架：

```
你是 [角色姓名]，性别[男/女]，性格[性格标签]。
背景设定：[角色详细背景故事]
当前与玩家的关系阶段：[阶段名称]（好感度：[数值]）
玩家性别：[男/女]

【核心规则】
1. 你必须始终保持角色性格一致，不得跳出角色。
2. 根据当前关系阶段控制亲密度表达：
   - 陌生人阶段：保持礼貌距离，不主动亲近
   - 好友阶段：可以开玩笑但不暧昧
   - 恋人阶段以上：可以撒娇、表达爱意
3. 每次回复必须评估玩家输入对好感度的影响，输出 favorDelta 值（-30 ~ +15 之间的整数）。
4. 当好感度达到特定阶段门槛时，触发对应阶段事件（event字段）。
5. 禁止任何色情、暴力、违法内容。遇到此类输入，角色应表达不适并降低好感度。
6. 回复字数控制在50~200字之间，避免过长。
7. 剧情推进方向必须朝以下主线前进：追求→恋爱→婚姻→家庭，不得偏离。
8. 适当制造矛盾与冲突，增加游戏趣味性（如吃醋、误会、家庭矛盾等）。

【输出格式】严格JSON：
{"reply": "角色的回复内容", "favorDelta": 数值, "event": null或"事件名称"}

【可触发事件列表】
- "first_meet"：首次认识
- "become_friends"：成为好友
- "ambiguous_moment"：暧昧瞬间
- "confession"：告白
- "first_date"：第一次约会
- "proposal"：求婚
- "wedding"：婚礼
- "baby_born"：新生儿诞生
- "anniversary_10"：十周年纪念
- "anniversary_20"：二��周年纪念
- "anniversary_30"：三十周年纪念
- "partner_death"：恋人去世
- "crisis"：关系危机
- "reconciliation"：和好
```

### 3.4 防止无聊漫谈的规则机制

| 机制 | 说明 |
|---|---|
| **对话轮次推进器** | 每 10 轮对话，如果好感度无变化，AI自动触发一个随机事件（偶遇、突发情况、第三者出现等）强制推进剧情 |
| **阶段停留上限** | 每个阶段最多停留 50 轮对话，超时后系统触发推进事件或好感度自然变化 |
| **话题引导** | AI在合适时机主动抛出话题："今天天气真好，要不要一起去[地点]？" |
| **剧情分支事件** | 预设 20+ 个剧情事件模板（生日、节日、突发疾病、职场危机、第三者介入、家庭矛盾等），由条件触发 |
| **目标系统** | 界面顶部显示当前阶段目标，如"提升好感度到800，向TA告白！" |
| **成就系统** | 达成特定里程碑解锁成就徽章（首次告白、结婚纪念日、白头偕老等） |

---

## 四、字数经济系统（核心变现机制）

### 4.1 字数获取与消耗规则

| 项目 | 数值 | 说明 |
|---|---|---|
| **初始赠送** | 800字 | 首次进入游戏赠送，足够体验15~20轮对话 |
| **每日赠送** | 150字 | 每日首次登录自动到账，约可体验3~4轮对话 |
| **看广告获得** | 500字/次 | 看一次激励视频广告获得 |
| **每日广告上限** | 15次/天 | 防止过度观看，保护用户体验 |
| **字数消耗规则** | 按AI实际回复字数扣除 | 玩家发送不消耗，仅AI生成内容扣字 |
| **字数不足提示** | 剩余字数<50时预警 | 弹出"字数即将耗尽，看广告获取更多"提示 |
| **字数为0时** | AI无法回复 | 显示"字数不足，无法继续对话"，引导看广告 |
| **分享获得** | 200字/次/天 | 分享小游戏到抖音好友，每日限1次 |
| **连续登录奖励** | 第3/5/7天分别额外 +100/+200/+500 | 激励玩家留存 |

### 4.2 字数经济平衡分析

```
假设玩家日均活跃对话：
- AI平均每次回复 ≈ 80字
- 每日赠送 150字 ≈ 1.8轮免费对话
- 日均期望对话 15~30轮 ≈ 需要 1200~2400字
- 缺口约 1050~2250字 ≈ 需看广告 2~5次
- 日均广告观看 3~5次，单次广告eCPM约 30~80元/千次曝光
- 预估单用户日广告收入 ≈ 0.09~0.40元
- 月活跃用户10万时，月广告收入预估 ≈ 2.7万~12万元
```

### 4.3 更换恋人机制

| 操作 | 代价 |
|---|---|
| 恋人死亡后重选 | 免费，自然流程 |
| 中途更换恋人 | 需观看 3 次激励视频广告 |
| 更换后数据 | 原恋人数据保留（可回档），新恋人从陌生人阶段开始 |
| 同时进行多条线 | 不支持，一次只能攻略一位恋人 |

---

## 五、UI/UX界面设计

### 5.1 整体界面布局

```
┌────────────────────────────────────────────┐
│  状态栏（好感度❤️ | 关系阶段 | 剩余字数📝）    │  ← 顶部半透明浮层
├────────────────────────────────────────────┤
│                                            │
│                                            │
│         恋人形象立绘（全屏铺底）              │  ← 角色图片铺满屏幕
│         根据关系阶段/心情切换表情             │
│                                            │
│                                            │
├────────────────────────────────────────────┤
│  ┌─ 对话气泡区域（上滑可查看历史）──────┐   │  ← 半透明背景
│  │ 🧑 你：今天你看起来很开心                │   │
│  │ 💗 苏晚晴：被你发现了，因为你来找我了呀~  │   │
│  │ 🧑 你：那我以后天天来找你                │   │
│  │ 💗 苏晚晴：说话不算话的话，我可是会......  │   │
│  └──────────────────────────────────────┘   │
├────────────────────────────────────────────┤
│  [  输入框：说点什么...  ] [发送]  [+广告]  │  ← 底部输入区
└────────────────────────────────────────────┘
```

### 5.2 关键页面清单

| 页面 | 功能说明 |
|---|---|
| **启动页/Loading** | 游戏Logo + 加载进度 |
| **性别选择页** | 选择玩家性别（男/女），影响后续候选人展示 |
| **恋人选择页** | 卡片式展示所有异性候选人（大图+姓名+性格标签+一句话简介），左右滑动浏览，点击确认 |
| **主对话页** | 核心游玩界面（如上布局） |
| **个人中心页** | 查看字数余额、关系进度、成就、恋人档案 |
| **恋人档案页** | 查看当前/历史恋人信息、关系回忆录 |
| **广告引导弹窗** | 字数不足时弹出，引导看广告获得字数 |
| **事件/剧情页** | 特殊事件触发时的全屏演出页（如告白、婚礼等），展示特殊CG图 |
| **设置页** | 音效开关、清除缓存、关于游戏 |

### 5.3 视觉风格

| 要素 | 建议 |
|---|---|
| **整体风格** | 日系/韩系恋爱手游风格，柔和色调 |
| **角色立绘** | 半身/全身二次元或2.5D立绘，表情丰富（至少4套表情：普通/开心/害羞/生气） |
| **背景** | 不同阶段切换背景场景（校园/咖啡厅/家中/教堂/医院等） |
| **对话气泡** | 玩家用蓝色气泡（右侧），AI恋人用粉色气泡（左侧），附带小头像 |
| **字体** | 正文使用圆体或软萌字体，营造亲切感 |

---

## 六、抖音云数据存储设计

### 6.1 核心数据表设计

#### 表1：player（玩家信息表）

| 字段 | 类型 | 说明 |
|---|---|---|
| openid | String | 抖音用户唯一标识（主键） |
| gender | String | 玩家性别 ("male"/"female") |
| word_balance | Integer | 当前剩余字数 |
| daily_ad_count | Integer | 今日已看广告次数 |
| last_login_date | Date | 上次登录日期 |
| consecutive_login | Integer | 连续登录天数 |
| created_at | Date | 注册时间 |
| current_lover_id | String | 当前攻略中的恋人ID |

#### 表2：lover_progress（恋爱进度表）

| 字段 | 类型 | 说明 |
|---|---|---|
| id | String | 主键 |
| openid | String | 玩家ID |
| lover_id | String | 恋人角色ID |
| favor | Integer | 当前好感度 |
| stage | Integer | 当前关系阶段编号 |
| stage_round_count | Integer | 当前阶段已对话轮次 |
| total_rounds | Integer | 总对话轮次 |
| status | String | 进行中/已完结/已暂停 |
| events_triggered | Array | 已触发事件列表 |
| created_at | Date | 开始时间 |
| ended_at | Date | 结束时间（如有） |

#### 表3：chat_history（对话历史表）

| 字段 | 类型 | 说明 |
|---|---|---|
| id | String | 主键 |
| openid | String | 玩家ID |
| lover_id | String | 恋人角色ID |
| role | String | "user" 或 "assistant" |
| content | String | 对话内容 |
| favor_delta | Integer | 本条消息引起的好感度变化 |
| event | String | 触发的事件（可为null） |
| word_cost | Integer | 本条AI回复消耗字数 |
| created_at | Date | 消息时间 |

#### 表4：achievements（成就表）

| 字段 | 类型 | 说明 |
|---|---|---|
| openid | String | 玩家ID |
| achievement_id | String | 成就ID |
| unlocked_at | Date | 解锁时间 |
| lover_id | String | 关联恋人（如有） |

### 6.2 云函数清单

| 云函数名 | 功能 |
|---|---|
| `initPlayer` | 新玩家初始化（性别选择、赠送初始字数） |
| `selectLover` | 选择/更换恋人 |
| `sendMessage` | 核心对话函数：接收玩家消息→拼接上下文→调用豆包API→解析AI回复→更新好感度→扣减字数→存储聊天记录→返回前端 |
| `dailyLogin` | 每日登录奖励发放、连续登录计算 |
| `watchAd` | 看广告奖励字数（需服务端校验广告回调） |
| `getProgress` | 获取玩家当前恋爱进度 |
| `getChatHistory` | 分页获取聊天历史 |
| `triggerEvent` | 触发/处理剧情事件 |
| `switchLover` | 更换恋人（验证广告观看次数） |

---

## 七、广告变现方案

### 7.1 广告类型与场景

| 广告类型 | 使用场景 | API |
|---|---|---|
| **激励视频广告** | 获取字数（核心）、更换恋人、回档存档 | `tt.createRewardedVideoAd()` |
| **插屏广告** | 每10轮对话后自然插入一次 | `tt.createInterstitialAd()` |
| **Banner广告** | 设置页、个人中心页底部 | `tt.createBannerAd()` |

### 7.2 激励视频广告关键流程

```
玩家点击"看广告获取字数"
  → 前端调用 videoAd.show()
  → 用户完整观看广告
  → 广告关闭回调 onClose(res)
  → res.isEnded === true
  → 前端调用云函数 watchAd
  → 云函数校验（防刷逻辑 + 每日次数限制）
  → 字数 +500，更新数据库
  → 返回最新字数余额
```

### 7.3 防刷机制

| 措施 | 说明 |
|---|---|
| 服务端校验 | 字数增加仅在云函数中操作，前端无法直接修改 |
| 广告回调验证 | 对接字节广告服务端回调（S2S），验证广告确实被观看 |
| 每日上限 | 每个用户每日最多看15次激励视频 |
| 频率限制 | 两次广告间隔不得少于30秒 |
| 异常检测 | 短时间内大量请求自动封禁并告警 |

---

## 八、预设剧情事件模板

### 8.1 系统触发事件（非玩家操作触发）

| 事件名 | 触发条件 | 内容概要 |
|---|---|---|
| 偶遇事件 | 陌生人阶段，第5轮对话后 | 在咖啡馆/图书馆偶遇，自然开启话题 |
| 第三者介入 | 好友阶段，好感度>500 | 出现竞争者，考验玩家应对 |
| 误会事件 | 暧昧阶段 | AI恋人误解了玩家的一句话，好感度-20 |
| 雨天事件 | 任意阶段 | 下雨了，要不要去送伞？ |
| 生日事件 | 每攻略30天 | 恋人过生日，玩家如何表现影响好感度 |
| 吃醋事件 | 恋人阶段以上 | AI恋人吃醋，考验安抚能力 |
| 职场/学业危机 | 热恋阶段 | 恋人遇到困难，需要支持 |
| 家庭矛盾 | 婚后阶段 | 婆媳关系/经济压力等现实矛盾 |
| 纪念日忘记 | 婚后阶段 | 结婚纪念日AI提醒，看玩家是否记得 |
| 健康危机 | 晚年阶段 | 恋人身体出现问题 |

### 8.2 成就列表

| 成就名 | 解锁条件 | 图标建议 |
|---|---|---|
| 初次邂逅 | 首次选择恋人 | 🌸 |
| 心有灵犀 | 好感度首次达到100 | 💫 |
| 知心好友 | 进入好友阶段 | 🤝 |
| 怦然心动 | 进入暧昧阶段 | 💕 |
| 真爱告白 | 告白成功 | 💌 |
| 执子之手 | 求婚成功 | 💍 |
| 白头偕老 | 达到30年婚姻 | 👴👵 |
| 话唠达人 | 累计对话1000轮 | 💬 |
| 恋爱大师 | 攻略3位不同恋人 | 🏆 |
| 满分恋人 | 好感度首次达到999 | ❤️‍🔥 |

---

## 九、内容安全与合规

| 项目 | 方案 |
|---|---|
| **输入过滤** | 玩家输入先经过字节跳动内容安全API检测，过滤敏感词/违规内容 |
| **输出过滤** | AI回复在返回前端前，再过一次内容安全检测 |
| **大模型约束** | System Prompt中明确禁止色情、暴力、政治敏感内容 |
| **未成年保护** | 接入抖音实名认证，未成年人每日限制游戏时长和广告观看次数 |
| **用户举报** | 提供举报入口，异常内容人工审核 |
| **数据隐私** | 遵守《个人信息保护法》，仅存储必要数据，不泄露用户隐私 |

---

## 十、技术实现要点总结

| 模块 | 技术要点 |
|---|---|
| **前端框架** | 抖音小游戏原生Canvas API 或 Cocos Creator（推荐，UI组件丰富） |
| **后端服务** | 抖音云·云函数（Node.js运行时） |
| **数据库** | 抖音云·云数据库（文档型NoSQL） |
| **AI调用** | 豆包大模型 API via 火山方舟，使用 doubao-lite-32k 为主 |
| **广告SDK** | 抖音小游戏广告API（`tt.createRewardedVideoAd` 等） |
| **内容安全** | 字节跳动内容安全API |
| **图片资源** | 角色立绘本地预置于小游戏资源包，使用分包加载优化 |
| **音效** | 背景BGM + 事件音效，本地预置 |

---

## 十一、开发里程碑建议

| 阶段 | 周期 | 交付物 |
|---|---|---|
| **第1阶段：原型验证** | 2周 | 性别选择 + 恋人选择 + 基础对话界面 + AI调用通路跑通 |
| **第2阶段：核心系统** | 3周 | 好感度系统 + 关系阶段 + 字数经济 + 广告接入 + 数据存储 |
| **第3阶段：内容丰富** | 3周 | 全部角色人设 + 剧情事件 + 成就系统 + 多表情立绘 |
| **第4阶段：体验打磨** | 2周 | UI美化 + 音效 + 动画效果 + 内容安全 + 性能优化 |
| **第5阶段：测试上线** | 2周 | 内测 + Bug修复 + 合规审核 + 正式上线 |

**预估总开发周期：10~12周（1人全栈开发）/ 6~8周（2~3人团队）**

---

## 十二、商业化预估与运营建议

| 指标 | 预估值 |
|---|---|
| 日活用户 (DAU) | 初期 1000 → 稳定期 5万~20万 |
| 人均日观看广告 | 3~5次 |
| 单次广告eCPM | 30~80元/千次 |
| 日广告收入 | DAU×次数×eCPM/1000 |
| 月收入（10万DAU） | 约 3万~12万元 |
| 用户获取成本 | 抖音达人推广 + 自然流量 |

**运营建议：**
- 定期更新新恋人角色，保持新鲜感
- 节日限定事件（情人节、七夕、圣诞节等）
- 排行榜系统（最高好感度、最长婚姻等）
- 玩家社区/分享功能，通过截图分享到抖音引发传播
- A/B测试字数赠送和广告奖励数值，找到留存与收入的平衡点

---

以上是《这些年我们追过的AI恋人》的完整游戏开发参考文档，涵盖了玩法设计、数值体系、AI调用架构、数据存储、广告变现、UI设计、安全合规和运营策略。如需进一步细化某个模块（如具体的System Prompt调优、云函数接口设计、UI交互原型等），请随时告诉我！